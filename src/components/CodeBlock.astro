---
import type { CodeBlockProps } from '../types/components';
interface Props extends CodeBlockProps {}

import { Prism } from '@astrojs/prism';

const { lang, code, caption } = Astro.props;
---

<figure class='code-figure'>
  <Prism lang={lang} code={code} />
  <figcaption class='code-figure__caption'>{caption}</figcaption>
</figure>

<style>
  figure {
    margin-block-start: 0;
    margin-block-end: 0;
    margin-inline-start: 0;
    margin-inline-end: 0;
  }

  @container (width < 480px) {
    .code-figure__caption {
      font-size: 1rem;
    }
  }

  .code-figure {
    container-type: normal;
    display: flex;
    flex-direction: column;
    margin: 0.5rem;
  }
  
  .code-figure__caption {
    display: flex;
    justify-content: center;
    padding: 0 0.25rem;
    font-size: 0.8rem;
    font-style: italic;
  }
</style>